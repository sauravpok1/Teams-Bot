"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProgressBar = void 0;
const constants_1 = require("../constants");
class ProgressBar {
    constructor() {
        this.progressBarMap = new Map();
    }
    async init(step, ctx) {
        var _a, _b;
        if (step === constants_1.ProgressStep.None) {
            return;
        }
        await ((_a = this.progressBarMap.get(step)) === null || _a === void 0 ? void 0 : _a.end(true));
        const progressBar = (_b = ctx.ui) === null || _b === void 0 ? void 0 : _b.createProgressBar(step, Object.keys(constants_1.ProgressMessages[step]).length);
        if (progressBar) {
            this.progressBarMap.set(step, progressBar);
        }
        await (progressBar === null || progressBar === void 0 ? void 0 : progressBar.start());
    }
    async next(step, detail) {
        var _a;
        if (step === constants_1.ProgressStep.None) {
            return;
        }
        await ((_a = this.progressBarMap.get(step)) === null || _a === void 0 ? void 0 : _a.next(detail));
    }
    async close(step, success) {
        var _a;
        if (step === constants_1.ProgressStep.None) {
            return;
        }
        await ((_a = this.progressBarMap.get(step)) === null || _a === void 0 ? void 0 : _a.end(success));
    }
    async closeAll(success) {
        for (const [type, bar] of this.progressBarMap) {
            await bar.end(success);
        }
    }
}
exports.ProgressBar = ProgressBar;
//# sourceMappingURL=progressBar.js.map
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MigrateConditionHandlerMW = void 0;
const teamsfx_api_1 = require("@microsoft/teamsfx-api");
const error_1 = require("../error");
const tools_1 = require("../tools");
const MigrateConditionHandlerMW = async (ctx, next) => {
    const inputs = ctx.arguments[ctx.arguments.length - 1];
    if (!inputs.projectPath) {
        ctx.result = teamsfx_api_1.err(error_1.NoProjectOpenedError());
        return;
    }
    const errorMessage = await tools_1.validateV1Project(inputs.projectPath);
    if (errorMessage) {
        ctx.result = teamsfx_api_1.err(error_1.InvalidV1ProjectError(errorMessage));
        return;
    }
    await next();
};
exports.MigrateConditionHandlerMW = MigrateConditionHandlerMW;
//# sourceMappingURL=migrateConditionHandler.js.map